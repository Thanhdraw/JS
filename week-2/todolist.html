<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To-do List</title>
  </head>
  <body>
    <h2>To-do List</h2>

    <input type="text" id="todo-input" placeholder="Nhập công việc..." />
    <button id="add-btn">Thêm</button>

    <ul id="todo-list"></ul>

    <script>
      const todos = JSON.parse(localStorage.getItem("todos")) || [];

      function saveTodo() {
        localStorage.setItem("todos", JSON.stringify(todos));
      }

      function addTodo() {
        const addBtn = document.getElementById("add-btn");
        addBtn.addEventListener("click", function (e) {
          e.preventDefault();
          const text = document.getElementById("todo-input").value.trim();
          if (text) {
            todos.push({
              id: Date.now(),
              text: text,
            });
            saveTodo();
            document.getElementById("todo-input").value = "";
            renderTodos();
          }
        });
      }
      addTodo();

      function renderTodos() {
        const todoList = document.getElementById("todo-list");
        todoList.innerHTML = "";
        todos.forEach((todo) => {
          const li = document.createElement("li");
          const btnRemove = document.createElement("button");
          btnRemove.textContent = "Xoá";
          const spanText = document.createElement("span");
          spanText.textContent = todo.text;
          spanText.style.marginRight = "10px";

          btnRemove.addEventListener("click", function (e) {
            removeFromTodos(todo.id);
          });
          li.appendChild(spanText);
          li.appendChild(btnRemove);
          todoList.appendChild(li);
        });
      }
      renderTodos();

      function removeFromTodos(id) {
        const index = todos.findIndex((item) => item.id === id);
        if (index !== -1) {
          todos.splice(index, 1);
          saveTodo();
          renderTodos();
        }
      }
    </script>
  </body>
</html>
