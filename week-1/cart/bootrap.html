<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gi·ªè H√†ng Bootstrap</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<body class="bg-light">

  <div class="container my-5">
    <h2 class="mb-4 text-center">üõí Qu·∫£n l√Ω gi·ªè h√†ng</h2>

    <!-- Th√™m s·∫£n ph·∫©m -->
    <div class="card mb-4 p-3">
      <h4>Th√™m s·∫£n ph·∫©m m·ªõi</h4>
      <div class="row g-2">
        <div class="col-md-5">
          <input type="text" id="product-name" class="form-control" placeholder="T√™n s·∫£n ph·∫©m" />
        </div>
        <div class="col-md-4">
          <input type="number" id="product-price" class="form-control" placeholder="Gi√° s·∫£n ph·∫©m" />
        </div>
        <div class="col-md-3">
          <button id="add-product" class="btn btn-primary w-100">Th√™m s·∫£n ph·∫©m</button>
        </div>
      </div>
    </div>

    <!-- T√¨m ki·∫øm -->
    <div class="mb-3">
      <input type="text" id="search-input" class="form-control" placeholder="üîç T√¨m ki·∫øm s·∫£n ph·∫©m..." />
    </div>

    <!-- Danh s√°ch s·∫£n ph·∫©m -->
    <div class="card p-3 mb-4">
      <h4>Danh s√°ch s·∫£n ph·∫©m</h4>
      <ul id="product-list" class="list-group list-group-flush"></ul>
    </div>

    <!-- Gi·ªè h√†ng -->
    <div class="card p-3 mb-3">
      <h4>Gi·ªè h√†ng</h4>
      <ul id="cart-list" class="list-group list-group-flush"></ul>
      <hr />
      <h5 class="text-end">T·ªïng ti·ªÅn: <span id="total">0</span> VNƒê</h5>
    </div>
  </div>

  <script>
    const products = [
      { id: 1, name: "Chu·ªôt Logitech", price: 350000 },
      { id: 2, name: "B√†n ph√≠m c∆° DareU", price: 650000 },
      { id: 3, name: "Tai nghe Gaming", price: 450000 },
    ];
    const cart = [];

    function renderProductList(productArray = products) {
      const productList = document.getElementById('product-list');
      productList.innerHTML = "";
      productArray.forEach(product => {
        const li = document.createElement('li');
        li.className = "list-group-item d-flex justify-content-between align-items-center";

        li.innerHTML = `
          <span>${product.name} - ${product.price.toLocaleString()} VNƒê</span>
          <button class="btn btn-sm btn-success">Th√™m v√†o gi·ªè</button>
        `;

        li.querySelector('button').addEventListener('click', () => addToCart(product));
        productList.appendChild(li);
      });
    }
    renderProductList();

    function addToCart(product) {
      const index = cart.findIndex(item => item.id === product.id);
      if (index !== -1) {
        cart[index].quantity += 1;
      } else {
        cart.push({ ...product, quantity: 1 });
      }
      renderCart();
    }

    function removeFromCart(id) {
      const index = cart.findIndex(item => item.id === id);
      if (index !== -1) {
        cart.splice(index, 1);
      }
      renderCart();
    }

    function increaseQuantity(id) {
      const index = cart.findIndex(item => item.id === id);
      if (index !== -1) {
        cart[index].quantity += 1;
      }
      renderCart();
    }

    function decreaseQuantity(id) {
      const index = cart.findIndex(item => item.id === id);
      if (index !== -1) {
        if (cart[index].quantity > 1) {
          cart[index].quantity -= 1;
        } else {
          const isConfirmed = confirm("Xo√° s·∫£n ph·∫©m n√†y kh·ªèi gi·ªè?");
          if (isConfirmed) {
            removeFromCart(id);
          }
        }
      }
      renderCart();
    }

    function renderCart() {
      const cartList = document.getElementById('cart-list');
      const totalCart = document.getElementById('total');
      cartList.innerHTML = "";
      let total = 0;

      cart.forEach(item => {
        const totalItem = item.price * item.quantity;
        total += totalItem;

        const li = document.createElement('li');
        li.className = "list-group-item d-flex justify-content-between align-items-center";

        li.innerHTML = `
          <div>
            ${item.name} - ${item.price.toLocaleString()} x ${item.quantity} = ${totalItem.toLocaleString()} VNƒê
          </div>
          <div>
            <button class="btn btn-sm btn-outline-primary me-1">+</button>
            <button class="btn btn-sm btn-outline-secondary me-1">-</button>
            <button class="btn btn-sm btn-outline-danger">Xo√°</button>
          </div>
        `;

        li.querySelectorAll("button")[0].addEventListener("click", () => increaseQuantity(item.id));
        li.querySelectorAll("button")[1].addEventListener("click", () => decreaseQuantity(item.id));
        li.querySelectorAll("button")[2].addEventListener("click", () => removeFromCart(item.id));

        cartList.appendChild(li);
      });

      totalCart.textContent = total.toLocaleString();
    }

    // Th√™m s·∫£n ph·∫©m
    document.getElementById('add-product').addEventListener('click', () => {
      const name = document.getElementById('product-name').value.trim();
      const price = parseInt(document.getElementById('product-price').value);

      if (!name || isNaN(price) || price <= 0) {
        alert("Nh·∫≠p s·∫£n ph·∫©m h·ª£p l·ªá");
        return;
      }

      const newProduct = {
        id: Date.now(),
        name,
        price
      };
      products.push(newProduct);
      renderProductList();
      document.getElementById('product-name').value = '';
      document.getElementById('product-price').value = '';
    });

    // T√¨m ki·∫øm
    document.getElementById('search-input').addEventListener('input', function () {
      const keyword = this.value.toLowerCase();
      const filtered = products.filter(p => p.name.toLowerCase().includes(keyword));
      renderProductList(filtered);
    });
  </script>
</body>
</html>
